# =========================
# AgriConnect Backend ENV
# =========================
#
# Copy this file to: server/.env
# (Do NOT commit server/.env)
#

# ---- Core ----
NODE_ENV=development
PORT=3001

# MySQL (Prisma)
# Example:
# DATABASE_URL="mysql://USER:PASSWORD@HOST:3306/DBNAME"
DATABASE_URL="mysql://USER:PASSWORD@HOST:3306/DBNAME"

# JWT Auth
JWT_SECRET="CHANGE_ME_TO_A_LONG_RANDOM_SECRET"
JWT_EXPIRES_IN="2h"

# CORS (production only; dev allows all)
# Comma-separated origins (include your deployed frontend URL and mobile webview origins if needed)
CORS_ORIGINS="http://localhost:5173,http://127.0.0.1:5173,capacitor://localhost"

# ---- Security / optional ----
# Enforce MFA for ADMIN-only endpoints
ENFORCE_ADMIN_MFA=false

# Refresh tokens (optional)
REFRESH_TOKEN_DAYS=30

# ---- Redis (optional; used for caching / tokens) ----
# REDIS_URL="redis://localhost:6379"
REDIS_URL=

# ---- Public URL (needed for Twilio callbacks, webhook URLs) ----
# Example:
# PUBLIC_BASE_URL="https://your-domain.com"
PUBLIC_BASE_URL="http://localhost:3001"

# ---- Twilio (SMS + WhatsApp) ----
# Required to actually send SMS/WhatsApp and to use inbound SMS commands.
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_SMS_FROM="+2567XXXXXXXX"
TWILIO_WHATSAPP_FROM="+2567XXXXXXXX"

# Validate Twilio webhook signatures (recommended in production)
TWILIO_VALIDATE_WEBHOOK=false

# Optional explicit callback URL (otherwise derived from PUBLIC_BASE_URL)
TWILIO_STATUS_CALLBACK_URL=

# Notification behavior
NOTIFY_CHANNELS="sms,whatsapp"
NOTIFY_FALLBACK_ORDER="whatsapp_then_sms"

# ---- Airtel Money Uganda (Payments) ----
# Fill these with your Airtel developer credentials and endpoints.
AIRTEL_UG_CLIENT_ID=
AIRTEL_UG_CLIENT_SECRET=
AIRTEL_UG_BASE_URL=

# Optional: webhook verification secret if your provider setup requires it
AIRTEL_UG_WEBHOOK_SECRET=

# ---- OpenAI (optional: TTS voice for chat) ----
OPENAI_API_KEY=

# ---- Blockchain (optional; simulation works if CONTRACT_ADDRESS is empty) ----
BLOCKCHAIN_RPC_URL="http://localhost:7545"
CONTRACT_ADDRESS=

# ---- Market web data ingestion (optional) ----
# MARKET_DATA_SOURCES_JSON='[{"name":"example","url":"https://...","currency":"UGX"}]'
MARKET_DATA_SOURCES_JSON=
MARKET_DATA_CRON_ENABLED=false
MARKET_DATA_CRON_SCHEDULE="0 */6 * * *"

# ---- Automation toggles ----
AUTO_FULFILL_ON_PAYMENT=false

